(this.webpackJsonpreact_proj=this.webpackJsonpreact_proj||[]).push([[0],{19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(3),a=n.n(i),s=n(8),c=n.n(s),u=(n(19),n(6)),o=n.n(u),l=n(9),j=n(1),h=n(2),b=n(10),p=n(11),O=n(4),d=n(13),m=n(12),x=(n(21),n(7)),g=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).compressImage=r.compressImage.bind(Object(O.a)(r)),r.handleChange=r.handleChange.bind(Object(O.a)(r)),r.state={maxSizeMB:1,maxWidthOrHeight:1024,webWorker:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null},mainThread:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null}},r}return Object(p.a)(n,[{key:"handleChange",value:function(e){var t=this;return function(n){t.setState(Object(h.a)({},e,n.currentTarget.value))}}},{key:"onProgress",value:function(e,t){var n=t?"webWorker":"mainThread";this.setState((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(h.a)({},n,Object(j.a)(Object(j.a)({},t[n]),{},{progress:e})))}))}},{key:"compressImage",value:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r,i,a,s,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files[0],console.log("input",r),e.t0=console,e.next=5,x.a.getExifOrientation(r);case 5:return e.t1=e.sent,e.t0.log.call(e.t0,"ExifOrientation",e.t1),i=n?"webWorker":"mainThread",this.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(h.a)({},i,Object(j.a)(Object(j.a)({},e[i]),{},{inputSize:(r.size/1024/1024).toFixed(2),inputUrl:URL.createObjectURL(r)})))})),a={maxSizeMB:this.state.maxSizeMB,maxWidthOrHeight:this.state.maxWidthOrHeight,useWebWorker:n,onProgress:function(e){return c.onProgress(e,n)}},e.next=12,Object(x.a)(r,a);case 12:s=e.sent,console.log("output",s),this.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(h.a)({},i,Object(j.a)(Object(j.a)({},e[i]),{},{outputSize:(s.size/1024/1024).toFixed(2),outputUrl:URL.createObjectURL(s)})))}));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.webWorker,i=t.mainThread,a=t.maxSizeMB,s=t.maxWidthOrHeight;return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsxs)("div",{children:["Options:",Object(r.jsx)("br",{}),Object(r.jsxs)("label",{htmlFor:"maxSizeMB",children:["maxSizeMB: ",Object(r.jsx)("input",{type:"number",id:"maxSizeMB",name:"maxSizeMB",value:a,onChange:this.handleChange("maxSizeMB")})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("label",{htmlFor:"maxWidthOrHeight",children:["maxWidthOrHeight: ",Object(r.jsx)("input",{type:"number",id:"maxWidthOrHeight",name:"maxWidthOrHeight",value:s,onChange:this.handleChange("maxWidthOrHeight")})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("label",{htmlFor:"web-worker",children:["Compress in web-worker"," ",n.progress&&Object(r.jsxs)("span",{children:[n.progress," %"]}),Object(r.jsx)("input",{id:"web-worker",type:"file",accept:"image/*",onChange:function(t){return e.compressImage(t,!0)}})]}),Object(r.jsxs)("p",{children:[n.inputSize&&Object(r.jsxs)("span",{children:["Source image size: ",this.state.webWorker.inputSize," mb"]}),n.outputSize&&Object(r.jsxs)("span",{children:[", Output image size: ",this.state.webWorker.outputSize]})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{htmlFor:"main-thread",children:["Compress in main-thread"," ",i.progress&&Object(r.jsxs)("span",{children:[i.progress," %"]}),Object(r.jsx)("input",{id:"main-thread",type:"file",accept:"image/*",onChange:function(t){return e.compressImage(t,!1)}})]}),Object(r.jsxs)("p",{children:[i.inputSize&&Object(r.jsxs)("span",{children:["Source image size: ",this.state.mainThread.inputSize," mb"]}),i.outputSize&&Object(r.jsxs)("span",{children:[", Output image size: ",this.state.mainThread.outputSize]})]})]}),(i.inputUrl||n.inputUrl)&&Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"input preview"}),Object(r.jsx)("td",{children:"output preview"})]})}),Object(r.jsx)("tbody",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:Object(r.jsx)("img",{src:i.inputUrl||n.inputUrl,alt:"input"})}),Object(r.jsx)("td",{children:Object(r.jsx)("img",{src:i.outputUrl||n.outputUrl,alt:"output"})})]})})]})]})}}]),n}(a.a.Component),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))};c.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root")),S()}},[[22,1,2]]]);
//# sourceMappingURL=main.9474ea28.chunk.js.map